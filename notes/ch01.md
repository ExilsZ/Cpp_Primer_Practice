# 第一章 开始

## 熟悉编译器

**g++**：

- 编译：`g++ --std=c++11 ch01.cpp -o main`
- 运行：`./prog1`
- 查看运行状态：`echo $?`
- 编译多个文件:`g++ ch2.cpp Sales_item.cc -o main`

输入`g++ --help`，查看编译器选项，输入`g++ -v --help`可以看到更完整的指令。

例如还有些常用的：

```shell
-h FILENAME, -soname FILENAME: Set internal name of shared library
-I PROGRAM, --dynamic-linker PROGRAM: Set PROGRAM as the dynamic linker to use
-l LIBNAME, --library LIBNAME: Search for library LIBNAME
-L DIRECTORY, --library-path DIRECTORY: Add DIRECTORY to library search path
```

**获得程序状态**:

- windows cmd:`echo %ERRORLEVEL%`or`echo %errorlevel%`
- windows powershell:`echo $?`or`$?`
- UNIX:`echo $?`

## IO

- `#include <iostream>`
- `std::cout << "hello"`
- `std::cin >> v1`

记住`>>`和`<<`返回的结果都是左操作数，也就是**输入流和输出流本身**。

**endl**：这是一个被称为**操纵符**（manipulator）的特殊值，效果是结束当前行，并将设备关联的缓冲区（buffer）中的内容刷到设备中。

UNIX 和 Mac 下键盘输入文件结束符：`ctrl+d`，Windows 下：`ctrl+z`

**头文件**：类的类型一般存储在头文件中，标准库的头文件使用`<>`，非标准库的头文件使用`""`。声明写在`.h`文件，定义实现写在`.cpp`文件。

**避免多次包含同一头文件**：

```cpp
#ifndef SALESITEM_H
#define SALESITEM_H
// Definition of Sales_itemclass and related functions goes here
#endif
```

**成员函数（类方法）**：使用`.`调用。

**命名空间（namespace）**：使用作用域运算符`::`调用。

## 注释

- 单行注释：`//`到行尾的所有内容作为注释内容忽略。
- 多行注释：`/**/`。编译器将`/*`和`*/`之间的内容都作为注释内容忽略。注意不能嵌套。

```cpp
#define SALESITEM_H
/*
 * 多行注释格式
 * 每一行加一个*
 */
```

## while 语句

```cpp
while (condition) {
    statements;
}
```

循环执行，直到条件（condition）为假。

## for 语句

```cpp
for (init-statement; condition; inc-expression) {
    statements;  
}
```

循环头由三部分组成：

- 一个初始化语句（init-statement）
- 一个循环条件（condition）
- 一个表达式（expression）

终止该循环代码的方法：
- ```cpp
    vector<string> v;
    string s;

    while (cin >> s) {
        v.push_back(s);
    }
    ```
`while (cin >> s) { ... }`循环在遇到下面两种情况时失败终止：

- 无效输入（Invalid input）
- 文件结束（End of file）

在 windows 中， `CTRL + Z`表示 EOF。
在 linux 中，`CTRL + D`表示 EOF。

也可以增加判断，检测到特定字符串输入时终止循环：

```cpp
string s;
while (cin >> s) {
    if (s == "end")
        break;
    cout << s << endl;
}
```

## 使用文件重定向

测试程序时反复从键盘敲入记录作为程序的输入是非常乏味的。大多数操作系统支持文件重定向，这种机制允许我们将标准输入和标准输出与命名文件关联起来：

```shell
$ ./main <infile >outfile
```

假定 $ 是操作系统提示符，则上述命令会从一个名为 infile 的文件读取记录，并将输出结果写入到一个名为 outfile 的文件中。

Power Shell 命令：

```shell
Get-Content infile | main.exe | tee outfile.txt
```
